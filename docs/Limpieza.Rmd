---
output: html_document
header-includes:
  - \usepackage{float}
  - \floatstyle{boxed}
  - \restylefloat{figure}
---

<div style="display:flex; align-items:center;">
  <h1 style="margin:0;">Limpieza y manejo de datos</h1>
  <img src="Imagenes/HNBI_LOGO1.jpeg" alt="Texto alternativo de la imagen" style="width:100px; margin-left:20px;">
</div>


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

#### Paquetes

```{r, warning=FALSE, message=FALSE}
library(palmerpenguins)
library(tidyverse)
library(kableExtra)
```

#### Datos

```{r}
data("penguins")
head(penguins)
```

### Contenido{.tabset .tabset-pills}

#### Funciones del paquete `dplyr`

- `select()`: seleccionar columnas

```{r}
sp_islas <- select(penguins, species, island)
head(sp_islas)
summary(sp_islas)
```

```{r}
pin_sin_sexo <- select(penguins, -sex)
head(pin_sin_sexo)
```

```{r}
numericas <- select(penguins, bill_length_mm:body_mass_g)
head(numericas)
```


- `filter()`: filtrar filas

```{r}
sp_Adelie <- filter(penguins, species == "Adelie")
summary(sp_Adelie)
```

```{r}
masamayor4500 <- filter(penguins, body_mass_g > 4500)
summary(masamayor4500)
```

```{r}
combinado <- filter(penguins, body_mass_g > 4500 & bill_depth_mm < 15)
summary(combinado)
```

- `arrange()`: reordenar filas

```{r}
ordenascend <- arrange(penguins, bill_length_mm)
head(ordenascend)
```

```{r}
ordendescend <- arrange(penguins, desc(bill_length_mm))
head(ordendescend)
```

- `mutate()`: crear nuevas columnas

```{r}
peso_kg <- mutate(penguins, body_mass_kg = body_mass_g / 1000)
head(peso_kg)
```

```{r}
pesos <- mutate(penguins, body_mass_kg = body_mass_g / 1000, body_mass_mg = body_mass_g * 1000, body_mass_lbs = body_mass_kg * 2.20462)
head(pesos)
```


- `rename()`: cambiar nombre de columnas

```{r}
rename(peso_kg, pesokg = body_mass_kg)
```

```{r}
rename(peso_kg, largo_pico_mm = bill_length_mm, alto_pico_mm = bill_depth_mm, largo_aleta_mm = flipper_length_mm, masa_g = body_mass_g, sexo = sex, peso_kg = body_mass_kg)
```


- `summarise()`: crea un nuevo dataframe con los argumentos que especifiquemos

```{r}
rango_largo_pico <- summarise(penguins, range(na.omit(bill_length_mm)))
rango_largo_pico
```

```{r}
media_largo_aleta <- summarise(penguins, mean(na.omit(flipper_length_mm)))
media_largo_aleta
```

```{r}
medias <- summarise(penguins, aleta = mean(na.omit(flipper_length_mm)), pico = mean(na.omit(bill_length_mm)), masa = mean(na.omit(body_mass_g)))
medias
```

- `group_by()`: agrupar los datos. Muy útil combinado con la función `summarise()`.

```{r}
medias <- penguins %>%
  group_by(species) %>%
  summarise(masa_corporal = mean(na.omit(body_mass_g)))
medias
```

#### Funciones del paquete `tidyr`

- `drop_na()`:
- `gather()`: 
- `spread()`:
- `separate()`:
- `unite()`:
- `pivot_longer()`:
- `pivot_wider()`:

cambiar , por . en un vector

#### Manejo de fechas con el paquete `lubridate`

- `as_date()`:

#### Creación y modificación de cuadros con el paquete `kableExtra`

